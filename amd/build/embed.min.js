define(["core/ajax","core/notification"],function(a,b){var c="https://playquiznow.com",d=5e3;function e(a,b,c){var e=parseInt(b.height,10);if(!e||e<100)return;e>d&&(e=d);for(var f=document.querySelectorAll("iframe.playquiznow-iframe"),g=0;g<f.length;g++){var h=f[g];if(b.quizId){if(h.dataset.quizId!==b.quizId)continue}else try{if(h.contentWindow!==a.source)continue}catch(i){continue}h.style.height=e+"px"}}function f(b,c){var d=parseFloat(b.score)||0,e=parseFloat(b.maxScore)||100;a.call([{methodname:"mod_playquiznow_submit_grade",args:{cmid:c,score:d,maxscore:e}}])[0].fail(b.exception)}return{init:function(a,b,d,g){window.addEventListener("message",function(g){if(g.origin!==c)return;var h=g.data;if(!h||"object"!=typeof h||!h.type)return;switch(h.type){case"playquiznow:resize":e(g,h,a);break;case"playquiznow:quiz-complete":d&&f(h,b);break}})}}});
